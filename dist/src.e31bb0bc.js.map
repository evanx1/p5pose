{"version":3,"sources":["sketch.js","index.js"],"names":["audioFile","require","console","info","audio2File","audio3File","scale","width","height","p5","video","mySound","preload","getAudioContext","resume","loadSound","setSketch","sketch","setup","createCanvas","audioButton","createButton","position","mouseClicked","play","background","my2Sound","pause","my3Sound","userStartAudio","then","sound2Button","sound3Button","select","createCapture","VIDEO","size","poseNet","ml5","hide","on","drawPoses","draw","poses","translate","image","drawKeypoints","drawSkeleton","forEach","pose","keypoints","keypoint","score","fill","noStroke","square","x","y","value","soundFormats","ellipse","mouseX","mouseY","log","skeleton","p1","p2","stroke","line","module","hot","accept","window","location","reload","s2","p5s"],"mappings":"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","file":"src.e31bb0bc.js","sourceRoot":"../src","sourcesContent":["// import \"p5/lib/addons/p5.dom\";\n\nconst audioFile = require(\"./assets/calm.mp3\");\nconsole.info(audioFile)\nconst audio2File = require(\"./assets/sad.mp3\");\nconsole.info(audio2File)\nconst audio3File = require(\"./assets/up2u.mp3\");\nconsole.info(audio3File)\n\nconst scale = 1;\nconst width = 800 * scale;\nconst height = 600 * scale;\n\n// setSketch sets this \nlet p5;\n\n// setup initializes this\nlet video;\n\nlet mySound;\n\n\nexport function preload() {\n  //p5.soundFormats('mp3');\n  p5.getAudioContext().resume();\n  mySound = p5.loadSound(audioFile);\n}\n\n\nexport function setSketch(sketch) {\n  p5 = sketch;\n}\n\nexport function setup() {\n  p5.createCanvas(width, height);\n\n  const audioButton = p5.createButton('calm');\n  audioButton.position(5, height + 20);\n  //mySound = p5.loadSound('assets/ShanghaiSoundloop.mp3');\n  audioButton.mouseClicked(() => {\n    //console.log\n    \n    \n    mySound.play(); \n    p5.background(400,200,0); \n    my2Sound.pause(); \n    my3Sound.pause();  \n    p5.userStartAudio().then(() => {\n\n      //audioButton.remove(); \n      //osc = new window.p5.Oscillator();\n      // now you can call osc methods to make sound happen\n      p5.background(400,200,0); \n    });\n  });\n\n  let my2Sound;\n  //p5.soundFormats('mp3');\n  p5.getAudioContext().resume();\n  my2Sound = p5.loadSound(audio2File);\n\n  const sound2Button = p5.createButton('sad');\n  sound2Button.position(60, height + 20);\n  //mySound = p5.loadSound('assets/ShanghaiSoundloop.mp3');\n  sound2Button.mouseClicked(() => {\n    //console.log\n    \n    my2Sound.play(); \n    mySound.pause(); \n    my3Sound.pause(); \n    p5.userStartAudio().then(() => {\n\n      //audioButton.remove(); \n      //osc = new window.p5.Oscillator();\n      // now you can call osc methods to make sound happen\n      p5.background(10,10,60); \n    });\n  });\n  \n  let my3Sound;\n  //p5.soundFormats('mp3');\n  p5.getAudioContext().resume();\n  my3Sound = p5.loadSound(audio3File); \n\n  const sound3Button = p5.createButton('Up 2 U');\n  sound3Button.position(110, height + 20);\n  //mySound = p5.loadSound('assets/ShanghaiSoundloop.mp3');\n  sound3Button.mouseClicked(() => {\n    //console.log\n    \n    my3Sound.play(); \n    mySound.pause();\n    my2Sound.pause(); \n    p5.userStartAudio().then(() => {\n\n      //audioButton.remove(); \n      //osc = new window.p5.Oscillator();\n      // now you can call osc methods to make sound happen\n      p5.background(100,10,600);\n    });\n  });\n  video = p5.select('video') || p5.createCapture(p5.VIDEO);\n  video.size(width, height);\n\n  // Create a new poseNet method with a single detection\n  const poseNet = ml5.poseNet(video, () => p5.select('#status').hide());\n\n  // Every time we get a new pose, draw it\n  poseNet.on('pose', drawPoses);\n  \n  // Hide the video element, and just show the canvas\n  video.hide();\n}\n\nexport function draw() {\n}\n\nfunction drawPoses(poses) {\n  p5.translate(width, 0); // move to far corner\n  p5.scale(-1.0, 1.0);\n  p5.image(video, 0, 0, video.width, video.height); \n  drawKeypoints(poses);\n  drawSkeleton(poses); \n}\n\n// Draw ellipses over the detected keypoints\nfunction drawKeypoints(poses) {\n  poses.forEach((pose) =>\n    pose.pose.keypoints.forEach((keypoint) => {\n      if (keypoint.score > 0.2) {\n        p5.fill(300, 500, 800); \n        p5.noStroke();\n        p5.square(keypoint.position.x, keypoint.position.y, 20);\n        \n      }\n    })\n  )\n}\n\nlet value = 0;\nfunction draw() {\n  //p5.fill(value);\n  //p5.rect(25, 25, 50, 50);\n}\n\n// function mouseClicked() {\n//   if (value === 0) {\n//     value = 255;\n//   } else {\n//     value = 0;\n//   }\n// }\nexport function mouseClicked() {\n  p5.soundFormats('mp3');\n  p5.ellipse(mouseX, mouseY, 5, 5);\n  \n  console.log(p5.mySound);\n  // prevent default\n  //return false; \n}\n// function mouseClicked(event) {\n//   console.log(event);\n// }\n\nfunction drawSkeleton(poses) {\n    poses.forEach((pose) => {\n      pose.skeleton.forEach((skeleton) => {\n        const [p1, p2] = skeleton;\n        p5.stroke(200, 0, 0); \n        p5.line(p1.position.x, p1.position.y, p2.position.x, p2.position.y);\n      \n\n      });\n    }); \n}\n","// import p5 from 'p5';\nimport * as sketch from './sketch';\n\n// Force page refresh on hot reload\nif (module.hot) {\n    module.hot.accept(() => window.location.reload());\n}\n\nconst s2 = (p5s) => {\n  sketch.setSketch(p5s);\n  p5s.preload = () => sketch.preload(sketch);\n  p5s.setup = () => sketch.setup(sketch);\n  p5s.draw = () => sketch.draw(sketch);\n}\n\nnew p5(s2, 'container');\n"]}